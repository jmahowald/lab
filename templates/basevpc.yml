Dependencies:
  - bucketterraform
Name: basevpc
Modules:
- Name: network
  outputs:
  - vpc_id
  - bastion_user
  - private_subnet_ids
  - vpc_cidr
  - bastion_ips
  - public_subnet_ids
  - public_sg_id
  - availabity_zones
  - private_sg_id
  - all_sg_ids
  local_path: ../../external/terraform-aws-vpc//modules/network
  module_vars:
  - module_name: amazon-amis
    mappings:
    - source_var_name: ami_id
      var_name: ami
    - var_name: image_user
  remote_source_vars: null
  vars:
  - var_name: aws_region
    default: {{.Env.AWS_DEFAULT_REGION}}
  - var_name: availability_zone_count
    default: 2
  - var_name: bastion_server_count
    default: 1
  - var_name: environment
    default: {{.Env.ENV_NAME}}
  - var_name: owner
    default: backpacksys
  - var_name: vpc_cidr
    default: {{.Env.VPC_CIDR_OCTET}}.0.0/16
  - var_name: public_subnet_cidrs
    type: list
    defaults:
    - {{.Env.VPC_CIDR_OCTET}}.0.0/24
    - {{.Env.VPC_CIDR_OCTET}}.1.0/24

  - var_name: private_subnet_cidrs
    type: list
    defaults:
    - {{.Env.VPC_CIDR_OCTET}}.10.0/24
    - {{.Env.VPC_CIDR_OCTET}}.11.0/24

  - var_name: key_name
    default: {{.Env.ENV_NAME}}
  - var_name: ssh_keypath
- Name: amazon-amis
  local_path: ../../external/terraform-aws-vpc//modules/amazon-amis
  optional_vars:
  - channel
  - virtualization_type
  - version
  vars: []
